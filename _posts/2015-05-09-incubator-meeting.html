<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body><hr/><p>layout: post
title: "Incubator Meeting"
tags: terminal directory permissions
date: May 9, 2015
---
#### How to add the read write permissions recursively?
1. identify yourself</p><pre><code>\&gt;whoami

\&gt;id</code></pre><ol><li>add permissions for usera</li></ol><pre><code>\&gt; sudo chown -R usera:staff ~/Workspace</code></pre><pre><code>\&gt; sudo chown -R usera:staff /Users/usera</code></pre><ol><li>add read and write permissions</li></ol><pre><code>\&gt;chmod -R ug+rw foldername</code></pre><h4 id="developing-related">developing related</h4><p>nodemon</p><p>http://localhost:8080/api/test  response a json object success.</p><p>http://www.evernote.com/l/AZL97NJX1lhNp5y2mfWrTYAQa2AugmPGmvM/</p><h4 id="when-you-create-a-new-api-you-need-to">When you create a new API, you need to:</h4><ol><li>Create a new model file if it doesn’t already exist.</li><li>Add a new controller for the model or update the existing one with the needed functions.</li><li>Bind the controller method to the URL you want the API to be consumed from in routes.js</li><li>Test the endpoint by using Postman or Advanced Rest Client at the URl you specified. For this, you will need to go to terminal at the CharaSparkAPI folder and run ‘nodemon server’. If you don’t have nodemon, you can install it by running ‘sudo npm install -g nodemon’.</li></ol><p>sbulime: dbclick and use cmd + d to select multiple cursors</p><h4 id="developing-note">developing note</h4><h5 id="target">Target:</h5><pre><code>Signup
Post: /api/signup
creates the user

Update
PUT: /api/user/:userID
updates the user

Get
GET: /api/user/:userID
gets a specific user</code></pre><p>Let's try to figure out how this /api/test works.</p><ol><li>routes.js 
   server.get(PATH + 'user/:userID', User.getProfile);</li></ol><p>   // this creates a url for the service
   // set a get method for /api/test</p><ol><li>/models/user.js</li></ol><p>   // which is associated with mongoose and mongodb using
		var UserSchema = new Schema({
		  user_id: {
				type: String,
				required: true
			},
		  email: {
				type: String,
				unique: true,
				required: true,
			},
		  first_name: String,
		  last_name: String,
		  password: {
				type: String,
				required: true,
			},
		  phone: String,
		  createdDate: { 
		  	type: Date, 
		  	default: Date.now 
		  }	
		});
		mongoose.model('User', UserSchema)</p><p>   UserSchema defines the structure of User table.</p><ol><li>/controllers/user.js   create the function to handle the url request</li></ol><pre><code>&lt;code&gt;
exports.getProfile = function(req, res){
    User.find({},function(err, results) {
    
        return res.send(results);
      
      });
&lt;/code&gt;
</code></pre><ol><li>Lesson learned, always check your models schema</li></ol><ol><li>Use findOneAndUpdate to update the user profile.
<code>
	exports.updateProfile = function(req, res){</li></ol><pre><code>    var query = req.params.userID;
    var update = req.body;
    
    User.findOneAndUpdate(query, update, function(err, data){
        if(err){
            console.log('err is:', err);
            return next(err);
        }
        else{
            console.log('updated');
            return res.send(201, data);
        }
    });
};</code></pre></code><p>6. </p></body></html>